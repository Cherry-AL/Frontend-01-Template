# 每周总结可以写在这里
事件循环 (event loop)
事件循环是什么？
事件循环是浏览器执行任务的机制，它会不断循环判断消息队列中是否有任务，队列中的任务都是指宏任务，而宏任务中包含微任务队列，在宏任务结束前后执行微任务队列，知道微任务队列中为空才结束这个宏任务。

消息队列是什么？
消息队列是一种先进先出的数据结构，用于存放要执行的任务。

宏任务是什么？
宏任务是消息队列中的一个task，它可能是由用户交互、资源加载、script、web api（setTimeout, setInterval, setImmediate等）等所产生的。

微任务是什么？
微任务是宏任务中的一个子任务组，在宏任务结束前执行，为什么会有微任务的出现？因为在消息队列中无法根据优先级来执行任务，导致实时性较高的任务无法立即执行，像监听DOM元素的MutationObserve等，Promise.resolve 和 Promise.reject 都会产生一个微任务。微任务中也有可能产生一个微任务，当所以微任务执行完成才会结束当前的宏任务。



相关知识点总结
其实所有的JS代码都是一个微任务，只是哪些微任务构成了一个宏任务；执行在JS引擎里的就是微任务，执行在JS引擎之外的就是宏任务，循环宏任务的工作就是事件循环。

事件循环不属于JavaScript引擎实现的东西，而是由浏览器或NodeJS宿主环境实现的

一个宏任务里的同步代码可以理解为微任务，只不过比宏任务里的异步代码的微任务优先入队。

微任务是没有优先级的，一个宏任务中只存在一个微任务队列，根据入队时间决定微任务顺序，列表里的所有微任务执行完才会执行下一个宏任务。

Promise的then方法以及async函数里的await（await相当于语法上的then，then在分号之后）会将一个微任务入队，添加在微任务队列的最后。

拿浏览器举例：setTimeout、setInterval 这种其实不是 JS 语法本身的 API，是 JS 的宿主浏览器提供的 API， 所以是宏任务。 而 Promise 是 JS 本身自带的 API，这种就是微任务。

总结：宿主提供的方法是宏任务，JS 自带的是微任务